<!DOCTYPE html>
<html>
<head>
<style>
    div {
        width: 100px;
        height: 100px;
        border-style: solid;
        border-color: black;
        text-align: center;
        font-size: 100px;
    }
    
    h1 {
        float: right;
        margin-right: 40%;
        margin-top: 10%;
    }
    
    .win {
        color: red;
    }
</style>
</head>
<body>
    <h1 id="winner"></h1>
    <table>
        <tr>
            <td><div></div></td>
            <td><div></div></td>
            <td><div></div></td>
        </tr>
        <tr>
            <td><div></div></td>
            <td><div></div></td>
            <td><div></div></td>
        </tr>
        <tr>
            <td><div></div></td>
            <td><div></div></td>
            <td><div></div></td>
        </tr>
    </table>
    <button onClick="restart()">Restart</button>
    </body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
    var movesTree = {1:{data:4,2:8,3:8,5:8,6:8,7:8,8:{data:6,2:3,3:2,5:3,7:3}},
                     2:{data:6,1:3,3:{data:8,2:7,4:7,5:7,7:4},4:3,5:3,7:3,8:3},
                     3:{data:4,1:8,2:8,5:8,6:8,7:8,8:{data:2,1:6,5:6,6:1,7:1}},
                     4:{data:8,1:{data:7,2:6,3:6,5:6,6:{data:2,3:5,5:3}},2:{data:6,1:3,3:7,5:7,7:3},3:{data:5,1:5,2:{data:6,1:7,7:1},6:5,7:5},
                       5:{data:3,1:6,2:6,6:{data:2,1:7,7:1},7:6},6:{data:2,1:5,3:1,5:1,7:5},
                       7:{data:1,2:{data:6,3:5,5:3},3:2,5:2,6:2}},
                     5:{data:4,1:8,2:8,3:8,6:8,7:8,8:{data:2,1:6,3:1,6:1,7:1}},
                     6:{data:2,1:{data:8,3:5,4:5,5:4,7:5},3:1,4:1,5:1,7:1,8:1},
                     7:{data:4,1:8,2:8,3:8,5:8,6:8,8:{data:6,1:3,2:3,3:2,5:3}},
                     8:{data:2,1:{data:6,3:4,4:3,5:3,7:3},3:1,4:1,5:1,6:1,7:1}};
</script>
<script>
    var player = 0;
    var teams = ["X","O"];
    var row0 = [0,0,0];
    var row1 = [0,0,0];
    var row2 = [0,0,0];
    var board = [row0,row1,row2];
    var over = false;
    var playerTurn = true;
    var locations = [[0,0],[0,1],[0,2],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2]];
    var moves = [];
    var boardFull;
    var currID;
    var loc;
    
    var clsElements = document.querySelectorAll("div");
    
    for (var i = 0; i < clsElements.length; i++) 
        clsElements[i].id = "" + parseInt(i/3) + i%3;
    
    compMove();
    $(document).ready(function(){
        $("div").click(function(){
            if ($(this).html() == "" && !over && playerTurn) {
                currID = $(this).attr("id");
                move(currID.substr(0,1),currID.substr(1));
                moves.push(getLocation(currID.substr(0,1),currID.substr(1)));
                compMove();
            }
        });
    });
    
    function move(x,y) {
        document.getElementById("" + x + y).innerHTML = teams[player];
        board[x][y] = teams[player];
        checkWinner();
        player = (player+1)%2;
    }
    
    function getLocation (x,y) {
        for (var i = 0; i < locations.length; i++) {
            if (locations[i][0] == x && locations[i][1] == y)
                return i;
        }
    }
    
    function checkWinner() {
        boardFull = true;
        
        for (var i = 0; i < 3; i++)
            if (board[i][0] == board[i][1] && board[i][0] == board[i][2] && board[i][0] != 0)
                gameOver(board[i][0]);
        for (var i = 0; i < 3; i++)
            if (board[0][i] == board[1][i] && board[0][i] == board[2][i] && board[0][i] != 0)
                gameOver(board[0][i]);
        if (board[0][0] == board[1][1] && board[0][0] == board[2][2] && board[0][0] != 0)
            gameOver(board[0][0]);
        if (board[0][2] == board[1][1] && board[0][2] == board[2][0] && board[0][2] != 0)
            gameOver(board[0][2]);
        for (var i = 0; i < clsElements.length; i++) 
            if(clsElements[i].innerHTML == "")
                boardFull = false;
        if (boardFull && !over)
            gameOver("draw");
    }
    
    function compMove() {
        loc = pickCompMove(moves);
        move(locations[loc][0],locations[loc][1]);
    }
    
    function pickCompMove(given) {
        var currMove;
        
        if (given == 0)
            return 0;
        else {
            currMove = movesTree[moves[0]];
            
            if (moves.length > 1) {
                for (var i = 1; i < moves.length; i++)
                    currMove = currMove[moves[i]];
            }
            
            if (currMove.hasOwnProperty("data"))
                return currMove.data;
            else
                return currMove;
        }
    }
    
    function restart() {
        player = 0;
        row0 = [0,0,0];
        row1 = [0,0,0];
        row2 = [0,0,0];
        board = [row0,row1,row2];
        moves = [];
        for (var i = 0; i < clsElements.length; i++) 
            clsElements[i].innerHTML = "";
        document.getElementById("winner").innerHTML = "";
        over = false;
        compMove();
    } 
    
    function gameOver(given) {
        if (given != "draw")
            document.getElementById("winner").innerHTML = given + " Wins!";
        else
            document.getElementById("winner").innerHTML ="Draw! No winner.";
        over = true;
    }
</script>
</html>
